language: android
# Currently android projects are only supported in trusty, as per:
# https://docs.travis-ci.com/user/languages/android/#overview
# If this language is not there, try uncommenting: 
# "Android builds are only supported on our Trusty image at this time ..."
dist: trusty

jdk:
  - oraclejdk8
  - openjdk11

android:
  components:
    - tools
    - platform-tools
    - build-tools-28.0.3
    - android-28

before_install:
  - if [[ "$TRAVIS_JDK_VERSION" == "oraclejdk8" ]]; then yes | sdkmanager "platforms;android-28"; fi

script:
  - if [[ "$TRAVIS_JDK_VERSION" == "oraclejdk8" ]]; then ./gradlew verGJF build; fi
  - if [[ "$TRAVIS_JDK_VERSION" == "openjdk11" ]]; then ./gradlew :nullaway:test; fi

after_success:
  - .buildscript/deploy_snapshot.sh
  - ./gradlew jacocoTestReport coveralls

env:
  global:
    - secure: fsWvITuQXYy2BKuboQq6zY3fjieWS8Ik4i8y9PxkUEFNkvjyKMXzLXa+x8lITV1cmyDs+RXj2UJGajyRsggvr3dVZpVIf1PIjrfnzanG+kj+VXV+tD57/J4a6uX+EKI8k14zRoBATyuk4oS7mIrFwMRrxaxeJ3iBqhB6zJMr1NBgU1BvXS84OymuZK4wPrRnOMEV1gJ2uM5+LV0L8oWELlzpUMrpOFoTHhaF4eAIBvssKyHikYLaBPpvIsS3d3Oh56yLzn6RVXRoRYG88gxpbx30qcLchjgli9wkiP1YvgwyWcmhfvFivQ5CTsEpvM/RN3EIlu9qCW+MVUyz7q0NAk2+T7XVnOkj96VDDYX2Fn0INrc75XZAkYh4ly0Y0xZreHb090cIMw153ENo2suCLEZHEoycyK0elZVFKAsURKX41d/lYLBMsYAZc64O2/rRV2gck/CWhFjNZ310WQDDYP+HzB82L415k4p6uzWewjArfIe3a4qkdRFcXDvQ/3OuSA8barzxEAXGOKJShFYvlxpXf3mFGIoEiBbUfwuef9ZrhqBk6O0cqPlr2N2n7ubmNkgpYoulqAicaNNUXOkRlX9PubekFtQxNfakFHBqDp8GjcHB0PT2k/Ifyxzw77yfizBItqSw/DfgXmexGw4sNMakPfIpofWMHuTQemeI7y0=
    - secure: JyOzf/1zzdVaIcxDQ9tSU6P++gX9XTLproEW1yPkqud7yWPELD+weVCPF+BHoNtij8UpGDEBWtwgunXpmgCys/onfBcebVz93ADB/xbWVP4oxfFVfl9BpAeQG4+ZvIIWqQKeXKgZ+0yqBRA+zA/BZOrLaWJ9GSV8XPzGuWcHmeomec/6J/jVeEEASb+slT7VhIvN5+mJ6ugQduR3efCs5a8oQyCulREbIYy6x/Px0HMduwU8DLtm51qL9F4p3jpl0WAX0l1a34Vqb2ewJHXsjAnhJpySkK9Ds5aP8wCYfKLf39lAyoSx4WVrvETbmxuc11hXjzYN2PDu6ffRVMglq7S8YgQFq5l8h+Y0tdPnPqmPhlrFxPnk5NLkf+7EypQ4F9U7mNK0RRehU5VmzSQbWV2zi1TAb9pIMzae+wa7Zp5Uzm8T4kHuTSxFbOuE4F7or7QivU/Z3b0sB5yT/rZhOZ+kTk/oqhuQI3p5N3bEz1htPcceZH10AND2d4UN3GhV2aCnjORr5K9PzZ8TANkSqV3OZUfEUJz7GpIgxElWi1fIx8WbhwvqpR9yvoD/W/8xFLa+tGjZEtFZ3sFt+bc1pFCNYjFMqCRTL0Em3DFEb/dQiQheMQyDyvpSlSANlPqd4E3ZslmVb9NPP/Dn5lAGmPU7I0QvmPWtIJ111u/0SjY=

notifications:
  email: false

cache:
  directories:
    - $HOME/.gradle
